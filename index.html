<html>

<head>
    <script src="/socket.io/socket.io.js"></script>
    <script src="web3.js"></script>"
    <script>
        // Connect to WebSocket Server and start listening for notifications
        let socket = io();
        let el;
        socket.on('notification', (notificationBody) => {
            console.log("got notification");
            el = document.getElementById('server-notification');
            el.innerHTML = 'New notification: ' + notificationBody;
        });
    </script>
</head>

<body>
    <button class="enableEthereumButton">Enable Ethereum</button>
    <h2>Account: <span class="showAccount"></span></h2>
    <button class="enableNotificationsButton">Enable notifications on this address</button>
    <script>
        const ethereumButton = document.querySelector('.enableEthereumButton');
        const showAccount = document.querySelector('.showAccount');
        const enableNotificationsButton = document.querySelector('.enableNotificationsButton');
        // When clicked, send request to server to register the connected Ethereum address
        enableNotificationsButton.addEventListener('click', function (e) {
            e.preventDefault()
            console.log("send address");
            if (showAccount.innerHTML) {
                socket.emit('register address', showAccount.innerHTML);
            }
            alert(showAccount.innerHTML + " added to notifications")
        });
    </script>
</body>

</html>